import{r as o,a as e,j as n,F as b}from"./app-77c78180.js";import{C as g}from"./ComboboxPage-daac4a17.js";import{I as c}from"./InputError-9dd0c90a.js";import{I as d}from"./InputLabel-af26def7.js";import{P as ae}from"./PrimaryButton-7334f37f.js";import{S as ne}from"./SecondaryButton-a06cff5e.js";import{T as C}from"./TextAreaInput-3e7ef11b.js";import{T as k}from"./TextInput-e21f7f24.js";import{C as ie}from"./ComboboxMultiple-36171e81.js";import{k as _,C as se,a as le}from"./index-d801b066.js";import{K as te}from"./transition-9c6f9305.js";import{T as P}from"./ThirdButton-07d8e1e0.js";import"./clsx-1a177155.js";import"./inheritsLoose-c4a937f7.js";import"./createClass-1dd8160f.js";import"./defineProperty-741a9c8e.js";import"./use-tracked-pointer-0e9ddbd9.js";import"./render-32442a14.js";import"./keyboard-07de174a.js";import"./use-outside-click-a5ea58a4.js";import"./use-tree-walker-f16b852f.js";import"./use-controllable-7f85197e.js";import"./use-watch-377effaa.js";function re({ShouldMap:t,selected:N,tampilkanvalue:i="false",onChange:r,name:I}){const[l,s]=o.useState(""),p=l===""?t:t.filter(m=>m.description.toLowerCase().replace(/\s+/g,"").includes(l.toLowerCase().replace(/\s+/g,"")));return e("div",{className:"",children:e(_,{value:N,onChange:r,name:I,children:n("div",{className:"relative mt-1",children:[n("div",{className:"relative w-full overflow-hidden text-left bg-white border border-gray-300 rounded-md shadow-sm cursor-default focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300",children:[e(_.Input,{className:"w-full py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 break-words border-none focus:ring-0",autoComplete:"off",displayValue:m=>m.value?"("+m.value+") "+m.description:m.description,onChange:m=>s(m.target.value)}),e(_.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:e(se,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})})]}),e(te,{as:o.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>s(""),children:e(_.Options,{className:"absolute z-10 w-full py-1 mt-1 overflow-auto text-base break-words bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:p.length===0&&l!==""?e("div",{className:"relative px-4 py-2 text-gray-700 cursor-default select-none",children:"Nothing found."}):p.map(m=>e(_.Option,{className:({active:v})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${v?"bg-teal-600 text-white":"text-gray-900"}`,value:m,children:({selected:v,active:w})=>n(b,{children:[n("span",{className:`block truncate ${v?"font-medium":"font-normal"}`,children:[m.value," ",m.description]}),v?e("span",{className:`absolute inset-y-0 left-0 flex items-center pl-3 ${w?"text-white":"text-teal-600"}`,children:e(le,{className:"w-5 h-5","aria-hidden":"true"})}):null]})},m.id))})})]})})})}function Le({errors:t,submit:N,data:i,setData:r,closeButton:I,ShouldMap:l,model:s}){o.useState(null);const p=[{name:""}],j=(i.pic_id?i.pic_id:",").replace(/['"]+/g,"").split(",").map(a=>a.toString()),[T,S]=o.useState(()=>s?l.IkpPenanggung.find(a=>a.id===s.ikp_penanggung_id):p[0]),[L,K]=o.useState(()=>s?l.JenisKelamin.find(a=>a.id===s.jeniskelamin):p[0]),[F,J]=o.useState(()=>s?l.IkpPelapor.find(a=>a.id===s.ikp_pelapor_id):p[0]),[B,G]=o.useState(()=>s?l.IkpGrupLayanan.find(a=>a.id===s.ikp_gruplayanan_id):p[0]),[W,O]=o.useState(()=>s?l.IkpJenisInsiden.find(a=>a.id===s.ikp_jenis_insiden_id):p[0]),[R,q]=o.useState(()=>s?l.IkpTipeInsiden.find(a=>a.id===s.ikp_tipe_insiden_id):p[0]),[E,U]=o.useState(()=>s?l.IkpLokasi.find(a=>a.id===s.ikp_lokasi_id):p[0]),[V,$]=o.useState(()=>s?l.IkpSpesialisasi.find(a=>a.id===s.ikp_spesialisasi_id):p[0]),[z,A]=o.useState(()=>s?l.IkpDampak.find(a=>a.id===s.ikp_dampak_id):p[0]),[H,Q]=o.useState(()=>s?l.IkpProbabilitas.find(a=>a.id===s.ikp_probabilitas_id):p[0]),[Y,X]=o.useState(()=>s?l.IkpPenindak.find(a=>a.id===s.ikp_penindak_id):p[0]),[Z,M]=o.useState(()=>s?l.IkpTerjadiTempatLain.find(a=>a.id===s.terjadi_tempatlain):p[0]),[h,y]=o.useState((s==null?void 0:s.kronologis)??[{waktu:"",kronologi:""}]),x=(a,u)=>{let f=[...h];f[a][u.target.name]=u.target.value,y(f)},D=a=>{a.preventDefault();let u={waktu:"",kronologi:""};y([...h,u])},ee=a=>{let u=[...h];u.splice(a,1),y(u)};return o.useEffect(()=>{r({...i,kronologis:h})},[h]),n(b,{children:[n("div",{className:"px-4 py-5 bg-white sm:p-6",children:[e("div",{className:"grid grid-cols-12 gap-6",children:n("div",{className:"col-span-12 p-6 my-6 border-4 rounded-lg border-cyan-200 ",children:[e("label",{htmlFor:"",className:"block mb-4 text-lg font-bold text-gray-700 ",children:"Data Pasien (Wajib di Input)"}),n("div",{className:"grid grid-cols-12 gap-6",children:[n("div",{className:"col-span-6",children:[e(d,{for:"namapasien",value:"Nama Pasien"}),e(k,{id:"namapasien",value:i.namapasien,handleChange:a=>r("namapasien",a.target.value),type:"text",className:"block w-full mt-1"}),e(c,{message:t.namapasien,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"nrm",value:"NRM"}),e(k,{id:"nrm",value:i.nrm,handleChange:a=>r("nrm",a.target.value),type:"text",className:"block w-full mt-1"}),e(c,{message:t.nrm,className:"mt-2"})]}),n("div",{className:"col-span-2",children:[e(d,{for:"umur_tahun",value:"Umur"}),e(k,{id:"umur_tahun",value:i.umur_tahun,placeholder:"Tahun",handleChange:a=>r("umur_tahun",a.target.value),type:"number",className:"block w-full mt-1"}),e(c,{message:t.umur_tahun,className:"mt-2"})]}),n("div",{className:"col-span-2",children:[e(d,{for:"umur_bulan",value:"-"}),e(k,{id:"umur_bulan",value:i.umur_bulan,placeholder:"Bulan",handleChange:a=>r("umur_bulan",a.target.value),type:"number",className:"block w-full mt-1"}),e(c,{message:t.umur_bulan,className:"mt-2"})]}),n("div",{className:"col-span-2",children:[e(d,{for:"umur_hari",value:"-"}),e(k,{id:"umur_hari",value:i.umur_hari,placeholder:"Hari",handleChange:a=>r("umur_hari",a.target.value),type:"number",className:"block w-full mt-1"}),e(c,{message:t.umur_hari,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpPenanggung",value:"Penanggung Biaya Pasien"}),e(g,{ShouldMap:l.IkpPenanggung,selected:T,onChange:a=>{r({...i,ikp_penanggung_id:a.id}),S(a)}}),e(c,{message:t.ikp_penanggung_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"JenisKelamin",value:"Jenis Kelamin"}),e(g,{ShouldMap:l.JenisKelamin,selected:L,onChange:a=>{r({...i,jeniskelamin:a.id}),K(a)}}),e(c,{message:t.jeniskelamin,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"TanggalPelayanan",value:"Tanggal Masuk RS"}),e(k,{id:"tanggal_pelayanan",value:i.tanggal_pelayanan,handleChange:a=>r("tanggal_pelayanan",a.target.value),type:"datetime-local",className:"block w-full mt-1"}),e(c,{message:t.tanggal_pelayanan,className:"mt-2"})]})]})]})}),e("div",{className:"grid grid-cols-12 gap-6",children:n("div",{className:"col-span-12 p-6 my-6 border-4 rounded-lg border-cyan-200 ",children:[e("label",{htmlFor:"",className:"block mb-4 text-lg font-bold text-gray-700 ",children:"Rincian Kejadian (Wajib di Input)"}),n("div",{className:"grid grid-cols-12 gap-6",children:[n("div",{className:"col-span-6",children:[e(d,{for:"tanggal_insiden",value:"Tanggal dan Waktu Insiden"}),e(k,{id:"tanggal_insiden",value:i.tanggal_insiden,handleChange:a=>r("tanggal_insiden",a.target.value),type:"datetime-local",className:"block w-full mt-1"}),e(c,{message:t.tanggal_insiden,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpPelapor",value:"Orang Pertama Yang Melaporkan Insiden"}),e(g,{ShouldMap:l.IkpPelapor,selected:F,onChange:a=>{r({...i,ikp_pelapor_id:a.id}),J(a)}}),e(c,{message:t.ikp_pelapor_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"insiden",value:"Insiden"}),e(k,{id:"insiden",value:i.insiden,handleChange:a=>r("insiden",a.target.value),type:"text",className:"block w-full mt-1"}),e(c,{message:t.insiden,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpGrupLayanan",value:"Insiden menyangkut pasien"}),e(g,{ShouldMap:l.IkpGrupLayanan,selected:B,onChange:a=>{r({...i,ikp_gruplayanan_id:a.id}),G(a)}}),e(c,{message:t.ikp_gruplayanan_id,className:"mt-2"})]}),n("div",{className:"col-span-12 px-4 py-6 my-6 border-2 border-yellow-200 rounded-lg ",children:[e("label",{htmlFor:"",className:"block mb-4 text-lg font-bold text-gray-700 ",children:"Kronologi"}),n("div",{className:"grid grid-cols-12 gap-2",children:[h.map((a,u)=>n(o.Fragment,{children:[n("div",{className:"col-span-2",children:[e(d,{for:"waktu",value:"Waktu"}),e("input",{required:!0,type:"datetime-local",name:"waktu",value:a.waktu,autoComplete:"off",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:f=>x(u,f)})]}),n("div",{className:"col-span-9",children:[e(d,{for:"kronologi",value:"Kronologis Insiden"}),e("textarea",{required:!0,name:"kronologi",value:a.kronologi,rows:5,autoComplete:"off",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",onChange:f=>x(u,f)})]}),h.length!==1&&e("div",{className:"col-span-1",children:e(P,{type:"button",color:"red",className:"mt-6",onClick:()=>ee(u),children:n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 icon icon-tabler icon-tabler-trash",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M4 7l16 0"}),e("path",{d:"M10 11l0 6"}),e("path",{d:"M14 11l0 6"}),e("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),e("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})})]},u)),e("div",{className:"col-span-12",children:e(P,{onClick:D,children:"Tambah"})})]})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpJenisInsiden",value:"Jenis Insiden"}),e(g,{ShouldMap:l.IkpJenisInsiden,selected:W,onChange:a=>{r({...i,ikp_jenis_insiden_id:a.id}),O(a)}}),e(c,{message:t.ikp_jenis_insiden_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpTipeInsiden",value:"Tipe Insiden"}),e(g,{ShouldMap:l.IkpTipeInsiden,selected:R,onChange:a=>{r({...i,ikp_tipe_insiden_id:a.id}),q(a)}}),e(c,{message:t.ikp_tipe_insiden_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpSpesialisasi",value:"Insiden Terjadi Pada Pasien"}),e(g,{ShouldMap:l.IkpSpesialisasi,selected:V,onChange:a=>{r({...i,ikp_spesialisasi_id:a.id}),$(a)}}),e(c,{message:t.ikp_spesialisasi_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"IkpLokasi",value:"Tempat Insiden"}),e(g,{ShouldMap:l.IkpLokasi,selected:E,onChange:a=>{r({...i,ikp_lokasi_id:a.id}),U(a)}}),e(c,{message:t.ikp_lokasi_id,className:"mt-2"})]}),i.ikp_lokasi_id?n(b,{children:[e("div",{className:"col-span-6"}),n("div",{className:"col-span-6",children:[e(d,{for:"lokasi_name",value:"Lokasi Detail Kejadian IKP"}),e(k,{id:"lokasi_name",value:i.lokasi_name,handleChange:a=>r("lokasi_name",a.target.value),type:"text",className:"block w-full mt-1"}),e(c,{message:t.lokasi_name,className:"mt-2"})]})]}):e(b,{}),n("div",{className:"col-span-12",children:[e(d,{for:"Kategori Risiko",value:"Unit Kerja Penyebab Insiden"}),e(ie,{ShouldMap:l.pics,name:"pic_id",onChange:a=>{r({...i,pic_id:a})},defaultValues:j}),e(c,{message:t.pic_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"Dampak",value:"Dampak Insiden Terhadap Pasien"}),e(re,{ShouldMap:l.IkpDampak,selected:z,onChange:a=>{r({...i,ikp_dampak_id:a.id}),A(a)}}),e(c,{message:t.ikp_dampak_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"Probabilitas",value:"Probabilitas"}),e(g,{ShouldMap:l.IkpProbabilitas,selected:H,onChange:a=>{r({...i,ikp_probabilitas_id:a.id}),Q(a)}}),e(c,{message:t.ikp_probabilitas_id,className:"mt-2"})]}),n("div",{className:"col-span-12",children:[e(d,{for:"tindak_lanjut_hasil",value:"Tindak lanjut yang dilakukan segera setelah kejadian, dan hasilnya"}),e(C,{id:"tindak_lanjut_hasil",value:i.tindak_lanjut_hasil,handleChange:a=>r("tindak_lanjut_hasil",a.target.value),rows:5,type:"text",className:"block w-full mt-1"}),e(c,{message:t.tindak_lanjut_hasil,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"Penindak",value:"Tindak Lanjut Dilakukan Oleh"}),e(g,{ShouldMap:l.IkpPenindak,selected:Y,onChange:a=>{r({...i,ikp_penindak_id:a.id}),X(a)}}),e(c,{message:t.ikp_penindak_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(d,{for:"TerjadiTempatlain",value:"Apakah kejadian insiden yang sama pernah terjadi pada Pelayanan lain ?"}),e(g,{ShouldMap:l.IkpTerjadiTempatLain,selected:Z,onChange:a=>{r({...i,terjadi_tempatlain:a.id}),M(a)}}),e(c,{message:t.terjadi_tempatlain,className:"mt-2"})]}),i.terjadi_tempatlain==1?n("div",{className:"col-span-12",children:[e(d,{for:"langkah_tempatlain",value:"Langkah/tindakan apa yang telah diambil pada pelayanan tersebut untuk mencegah terulangnya kejadian yang sama?"}),e(C,{id:"langkah_tempatlain",value:i.langkah_tempatlain,handleChange:a=>r("langkah_tempatlain",a.target.value),rows:5,type:"text",className:"block w-full mt-1"}),e(c,{message:t.langkah_tempatlain,className:"mt-2"})]}):e(b,{})]})]})})]}),n("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e(ae,{children:N}),e(ne,{className:"mx-2",onClick:I,children:"Batal"})]})]})}export{Le as default};
