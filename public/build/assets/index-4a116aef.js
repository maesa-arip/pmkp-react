import{r as d,b as J}from"./app-5aa17113.js";import{i as ae,s as ve,u as me,a as C,x as xe}from"./use-tracked-pointer-d61f8c08.js";import{V,j as se,y as z,p as ie,o as m,X as j,l as k,s as Re,u as B,P as ge,m as de}from"./render-c6e0c5e2.js";import{I as q,h as Oe,s as Ce,o as w,r as Ie,A as he}from"./keyboard-7adaa723.js";import{L as Se}from"./use-outside-click-d3f67223.js";import{F as we}from"./use-tree-walker-5f6fd22f.js";import{T as Pe,e as $e}from"./use-controllable-862de799.js";import{s as Te,p as re,C as ye}from"./transition-809650c7.js";import{m as pe}from"./use-watch-17402165.js";var Ee=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ee||{}),Me=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Me||{}),De=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(De||{}),Fe=(e=>(e[e.OpenCombobox=0]="OpenCombobox",e[e.CloseCombobox=1]="CloseCombobox",e[e.GoToOption=2]="GoToOption",e[e.RegisterOption=3]="RegisterOption",e[e.UnregisterOption=4]="UnregisterOption",e[e.RegisterLabel=5]="RegisterLabel",e))(Fe||{});function ne(e,n=r=>r){let r=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=he(n(e.options.slice()),a=>a.dataRef.current.domRef.current),s=r?o.indexOf(r):null;return s===-1&&(s=null),{options:o,activeOptionIndex:s}}let ke={1(e){return e.dataRef.current.disabled||e.comboboxState===1?e:{...e,activeOptionIndex:null,comboboxState:1}},0(e){if(e.dataRef.current.disabled||e.comboboxState===0)return e;let n=e.activeOptionIndex,{isSelected:r}=e.dataRef.current,o=e.options.findIndex(s=>r(s.dataRef.current.value));return o!==-1&&(n=o),{...e,comboboxState:0,activeOptionIndex:n}},2(e,n){var r;if(e.dataRef.current.disabled||e.dataRef.current.optionsRef.current&&!e.dataRef.current.optionsPropsRef.current.static&&e.comboboxState===1)return e;let o=ne(e);if(o.activeOptionIndex===null){let a=o.options.findIndex(i=>!i.dataRef.current.disabled);a!==-1&&(o.activeOptionIndex=a)}let s=xe(n,{resolveItems:()=>o.options,resolveActiveIndex:()=>o.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...o,activeOptionIndex:s,activationTrigger:(r=n.trigger)!=null?r:1}},3:(e,n)=>{let r={id:n.id,dataRef:n.dataRef},o=ne(e,a=>[...a,r]);e.activeOptionIndex===null&&e.dataRef.current.isSelected(n.dataRef.current.value)&&(o.activeOptionIndex=o.options.indexOf(r));let s={...e,...o,activationTrigger:1};return e.dataRef.current.__demoMode&&e.dataRef.current.value===void 0&&(s.activeOptionIndex=0),s},4:(e,n)=>{let r=ne(e,o=>{let s=o.findIndex(a=>a.id===n.id);return s!==-1&&o.splice(s,1),o});return{...e,...r,activationTrigger:1}},5:(e,n)=>({...e,labelId:n.id})},le=d.createContext(null);le.displayName="ComboboxActionsContext";function H(e){let n=d.useContext(le);if(n===null){let r=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,H),r}return n}let ue=d.createContext(null);ue.displayName="ComboboxDataContext";function U(e){let n=d.useContext(ue);if(n===null){let r=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,U),r}return n}function Le(e,n){return B(n.type,ke,e,n)}let _e=d.Fragment;function Ae(e,n){let{value:r,defaultValue:o,onChange:s,name:a,by:i=(b,v)=>b===v,disabled:g=!1,__demoMode:I=!1,nullable:p=!1,multiple:R=!1,...h}=e,[t=R?[]:void 0,c]=Pe(r,s,o),[S,l]=d.useReducer(Le,{dataRef:d.createRef(),comboboxState:I?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),x=d.useRef(!1),L=d.useRef({static:!1,hold:!1}),E=d.useRef(null),N=d.useRef(null),M=d.useRef(null),_=d.useRef(null),T=m(typeof i=="string"?(b,v)=>{let P=i;return(b==null?void 0:b[P])===(v==null?void 0:v[P])}:i),A=d.useCallback(b=>B(f.mode,{1:()=>t.some(v=>T(v,b)),0:()=>T(t,b)}),[t]),f=d.useMemo(()=>({...S,optionsPropsRef:L,labelRef:E,inputRef:N,buttonRef:M,optionsRef:_,value:t,defaultValue:o,disabled:g,mode:R?1:0,get activeOptionIndex(){if(x.current&&S.activeOptionIndex===null&&S.options.length>0){let b=S.options.findIndex(v=>!v.dataRef.current.disabled);if(b!==-1)return b}return S.activeOptionIndex},compare:T,isSelected:A,nullable:p,__demoMode:I}),[t,o,g,R,p,I,S]);k(()=>{S.dataRef.current=f},[f]),Se([f.buttonRef,f.inputRef,f.optionsRef],()=>te.closeCombobox(),f.comboboxState===0);let O=d.useMemo(()=>({open:f.comboboxState===0,disabled:g,activeIndex:f.activeOptionIndex,activeOption:f.activeOptionIndex===null?null:f.options[f.activeOptionIndex].dataRef.current.value,value:t}),[f,g,t]),D=m(b=>{let v=f.options.find(P=>P.id===b);!v||y(v.dataRef.current.value)}),u=m(()=>{if(f.activeOptionIndex!==null){let{dataRef:b,id:v}=f.options[f.activeOptionIndex];y(b.current.value),te.goToOption(C.Specific,v)}}),F=m(()=>{l({type:0}),x.current=!0}),$=m(()=>{l({type:1}),x.current=!1}),K=m((b,v,P)=>(x.current=!1,b===C.Specific?l({type:2,focus:C.Specific,id:v,trigger:P}):l({type:2,focus:b,trigger:P}))),W=m((b,v)=>(l({type:3,id:b,dataRef:v}),()=>l({type:4,id:b}))),X=m(b=>(l({type:5,id:b}),()=>l({type:5,id:null}))),y=m(b=>B(f.mode,{0(){return c==null?void 0:c(b)},1(){let v=f.value.slice(),P=v.findIndex(Y=>T(Y,b));return P===-1?v.push(b):v.splice(P,1),c==null?void 0:c(v)}})),te=d.useMemo(()=>({onChange:y,registerOption:W,registerLabel:X,goToOption:K,closeCombobox:$,openCombobox:F,selectActiveOption:u,selectOption:D}),[]),be=n===null?{}:{ref:n},G=d.useRef(null),fe=ie();return d.useEffect(()=>{!G.current||o!==void 0&&fe.addEventListener(G.current,"reset",()=>{y(o)})},[G,y]),J.createElement(le.Provider,{value:te},J.createElement(ue.Provider,{value:f},J.createElement(ye,{value:B(f.comboboxState,{0:re.Open,1:re.Closed})},a!=null&&t!=null&&$e({[a]:t}).map(([b,v],P)=>J.createElement(Oe,{features:Ce.Hidden,ref:P===0?Y=>{var ce;G.current=(ce=Y==null?void 0:Y.closest("form"))!=null?ce:null}:void 0,...ge({key:b,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:b,value:v})})),j({ourProps:be,theirProps:h,slot:O,defaultTag:_e,name:"Combobox"}))))}let Be=V(Ae),Ve="input",je=V(function(e,n){var r,o,s,a;let i=q(),{id:g=`headlessui-combobox-input-${i}`,onChange:I,displayValue:p,type:R="text",...h}=e,t=U("Combobox.Input"),c=H("Combobox.Input"),S=z(t.inputRef,n),l=d.useRef(!1),x=ie(),L=function(){var u;return typeof p=="function"&&t.value!==void 0?(u=p(t.value))!=null?u:"":typeof t.value=="string"?t.value:""}();pe(([u,F],[$,K])=>{l.current||!t.inputRef.current||(K===0&&F===1||u!==$)&&(t.inputRef.current.value=u)},[L,t.comboboxState]),pe(([u],[F])=>{if(u===0&&F===1){let $=t.inputRef.current;if(!$)return;let K=$.value,{selectionStart:W,selectionEnd:X,selectionDirection:y}=$;$.value="",$.value=K,y!==null?$.setSelectionRange(W,X,y):$.setSelectionRange(W,X)}},[t.comboboxState]);let E=d.useRef(!1),N=m(()=>{E.current=!0}),M=m(()=>{setTimeout(()=>{E.current=!1})}),_=m(u=>{switch(l.current=!0,u.key){case w.Backspace:case w.Delete:if(t.mode!==0||!t.nullable)return;let F=u.currentTarget;x.requestAnimationFrame(()=>{F.value===""&&(c.onChange(null),t.optionsRef.current&&(t.optionsRef.current.scrollTop=0),c.goToOption(C.Nothing))});break;case w.Enter:if(l.current=!1,t.comboboxState!==0||E.current)return;if(u.preventDefault(),u.stopPropagation(),t.activeOptionIndex===null){c.closeCombobox();return}c.selectActiveOption(),t.mode===0&&c.closeCombobox();break;case w.ArrowDown:return l.current=!1,u.preventDefault(),u.stopPropagation(),B(t.comboboxState,{0:()=>{c.goToOption(C.Next)},1:()=>{c.openCombobox()}});case w.ArrowUp:return l.current=!1,u.preventDefault(),u.stopPropagation(),B(t.comboboxState,{0:()=>{c.goToOption(C.Previous)},1:()=>{c.openCombobox(),x.nextFrame(()=>{t.value||c.goToOption(C.Last)})}});case w.Home:if(u.shiftKey)break;return l.current=!1,u.preventDefault(),u.stopPropagation(),c.goToOption(C.First);case w.PageUp:return l.current=!1,u.preventDefault(),u.stopPropagation(),c.goToOption(C.First);case w.End:if(u.shiftKey)break;return l.current=!1,u.preventDefault(),u.stopPropagation(),c.goToOption(C.Last);case w.PageDown:return l.current=!1,u.preventDefault(),u.stopPropagation(),c.goToOption(C.Last);case w.Escape:return l.current=!1,t.comboboxState!==0?void 0:(u.preventDefault(),t.optionsRef.current&&!t.optionsPropsRef.current.static&&u.stopPropagation(),c.closeCombobox());case w.Tab:if(l.current=!1,t.comboboxState!==0)return;t.mode===0&&c.selectActiveOption(),c.closeCombobox();break}}),T=m(u=>{c.openCombobox(),I==null||I(u)}),A=m(()=>{l.current=!1}),f=ae(()=>{if(t.labelId)return[t.labelId].join(" ")},[t.labelId]),O=d.useMemo(()=>({open:t.comboboxState===0,disabled:t.disabled}),[t]),D={ref:S,id:g,role:"combobox",type:R,"aria-controls":(r=t.optionsRef.current)==null?void 0:r.id,"aria-expanded":t.disabled?void 0:t.comboboxState===0,"aria-activedescendant":t.activeOptionIndex===null||(o=t.options[t.activeOptionIndex])==null?void 0:o.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":f,"aria-autocomplete":"list",defaultValue:(a=(s=e.defaultValue)!=null?s:t.defaultValue!==void 0?p==null?void 0:p(t.defaultValue):null)!=null?a:t.defaultValue,disabled:t.disabled,onCompositionStart:N,onCompositionEnd:M,onKeyDown:_,onChange:T,onBlur:A};return j({ourProps:D,theirProps:h,slot:O,defaultTag:Ve,name:"Combobox.Input"})}),Ue="button",Ne=V(function(e,n){var r;let o=U("Combobox.Button"),s=H("Combobox.Button"),a=z(o.buttonRef,n),i=q(),{id:g=`headlessui-combobox-button-${i}`,...I}=e,p=ie(),R=m(l=>{switch(l.key){case w.ArrowDown:return l.preventDefault(),l.stopPropagation(),o.comboboxState===1&&s.openCombobox(),p.nextFrame(()=>{var x;return(x=o.inputRef.current)==null?void 0:x.focus({preventScroll:!0})});case w.ArrowUp:return l.preventDefault(),l.stopPropagation(),o.comboboxState===1&&(s.openCombobox(),p.nextFrame(()=>{o.value||s.goToOption(C.Last)})),p.nextFrame(()=>{var x;return(x=o.inputRef.current)==null?void 0:x.focus({preventScroll:!0})});case w.Escape:return o.comboboxState!==0?void 0:(l.preventDefault(),o.optionsRef.current&&!o.optionsPropsRef.current.static&&l.stopPropagation(),s.closeCombobox(),p.nextFrame(()=>{var x;return(x=o.inputRef.current)==null?void 0:x.focus({preventScroll:!0})}));default:return}}),h=m(l=>{if(Ie(l.currentTarget))return l.preventDefault();o.comboboxState===0?s.closeCombobox():(l.preventDefault(),s.openCombobox()),p.nextFrame(()=>{var x;return(x=o.inputRef.current)==null?void 0:x.focus({preventScroll:!0})})}),t=ae(()=>{if(o.labelId)return[o.labelId,g].join(" ")},[o.labelId,g]),c=d.useMemo(()=>({open:o.comboboxState===0,disabled:o.disabled,value:o.value}),[o]),S={ref:a,id:g,type:ve(e,o.buttonRef),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":(r=o.optionsRef.current)==null?void 0:r.id,"aria-expanded":o.disabled?void 0:o.comboboxState===0,"aria-labelledby":t,disabled:o.disabled,onClick:h,onKeyDown:R};return j({ourProps:S,theirProps:I,slot:c,defaultTag:Ue,name:"Combobox.Button"})}),Ke="label",ze=V(function(e,n){let r=q(),{id:o=`headlessui-combobox-label-${r}`,...s}=e,a=U("Combobox.Label"),i=H("Combobox.Label"),g=z(a.labelRef,n);k(()=>i.registerLabel(o),[o]);let I=m(()=>{var R;return(R=a.inputRef.current)==null?void 0:R.focus({preventScroll:!0})}),p=d.useMemo(()=>({open:a.comboboxState===0,disabled:a.disabled}),[a]);return j({ourProps:{ref:g,id:o,onClick:I},theirProps:s,slot:p,defaultTag:Ke,name:"Combobox.Label"})}),qe="ul",He=se.RenderStrategy|se.Static,We=V(function(e,n){let r=q(),{id:o=`headlessui-combobox-options-${r}`,hold:s=!1,...a}=e,i=U("Combobox.Options"),g=z(i.optionsRef,n),I=Te(),p=(()=>I!==null?I===re.Open:i.comboboxState===0)();k(()=>{var t;i.optionsPropsRef.current.static=(t=e.static)!=null?t:!1},[i.optionsPropsRef,e.static]),k(()=>{i.optionsPropsRef.current.hold=s},[i.optionsPropsRef,s]),we({container:i.optionsRef.current,enabled:i.comboboxState===0,accept(t){return t.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});let R=ae(()=>{var t,c;return(c=i.labelId)!=null?c:(t=i.buttonRef.current)==null?void 0:t.id},[i.labelId,i.buttonRef.current]),h=d.useMemo(()=>({open:i.comboboxState===0}),[i]);return j({ourProps:{"aria-labelledby":R,role:"listbox",id:o,ref:g},theirProps:a,slot:h,defaultTag:qe,features:He,visible:p,name:"Combobox.Options"})}),Xe="li",Ge=V(function(e,n){var r,o;let s=q(),{id:a=`headlessui-combobox-option-${s}`,disabled:i=!1,value:g,...I}=e,p=U("Combobox.Option"),R=H("Combobox.Option"),h=p.activeOptionIndex!==null?p.options[p.activeOptionIndex].id===a:!1,t=p.isSelected(g),c=d.useRef(null),S=Re({disabled:i,value:g,domRef:c,textValue:(o=(r=c.current)==null?void 0:r.textContent)==null?void 0:o.toLowerCase()}),l=z(n,c),x=m(()=>R.selectOption(a));k(()=>R.registerOption(a,S),[S,a]);let L=d.useRef(!p.__demoMode);k(()=>{if(!p.__demoMode)return;let O=de();return O.requestAnimationFrame(()=>{L.current=!0}),O.dispose},[]),k(()=>{if(p.comboboxState!==0||!h||!L.current||p.activationTrigger===0)return;let O=de();return O.requestAnimationFrame(()=>{var D,u;(u=(D=c.current)==null?void 0:D.scrollIntoView)==null||u.call(D,{block:"nearest"})}),O.dispose},[c,h,p.comboboxState,p.activationTrigger,p.activeOptionIndex]);let E=m(O=>{if(i)return O.preventDefault();x(),p.mode===0&&R.closeCombobox()}),N=m(()=>{if(i)return R.goToOption(C.Nothing);R.goToOption(C.Specific,a)}),M=me(),_=m(O=>M.update(O)),T=m(O=>{!M.wasMoved(O)||i||h||R.goToOption(C.Specific,a,0)}),A=m(O=>{!M.wasMoved(O)||i||!h||p.optionsPropsRef.current.hold||R.goToOption(C.Nothing)}),f=d.useMemo(()=>({active:h,selected:t,disabled:i}),[h,t,i]);return j({ourProps:{id:a,ref:l,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":t,disabled:void 0,onClick:E,onFocus:N,onPointerEnter:_,onMouseEnter:_,onPointerMove:T,onMouseMove:T,onPointerLeave:A,onMouseLeave:A},theirProps:I,slot:f,defaultTag:Xe,name:"Combobox.Option"})}),Ro=Object.assign(Be,{Input:je,Button:Ne,Label:ze,Options:We,Option:Ge});const Q=d;function Ye({title:e,titleId:n,...r},o){return Q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":n},r),e?Q.createElement("title",{id:n},e):null,Q.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"}))}const Je=Q.forwardRef(Ye);var Qe=Je;const Z=d;function Ze({title:e,titleId:n,...r},o){return Z.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":n},r),e?Z.createElement("title",{id:n},e):null,Z.createElement("path",{fillRule:"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z",clipRule:"evenodd"}))}const eo=Z.forwardRef(Ze);var oo=eo;const ee=d;function to({title:e,titleId:n,...r},o){return ee.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":n},r),e?ee.createElement("title",{id:n},e):null,ee.createElement("path",{fillRule:"evenodd",d:"M4 10a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H4.75A.75.75 0 014 10z",clipRule:"evenodd"}))}const no=ee.forwardRef(to);var ro=no;const oe=d;function ao({title:e,titleId:n,...r},o){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":n},r),e?oe.createElement("title",{id:n},e):null,oe.createElement("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"}))}const io=oe.forwardRef(ao);var lo=io,go=Qe,Oo=oo,Co=ro,Io=lo;export{Oo as C,Co as M,Io as P,go as a,Ro as k};
