import{r as l,l as H,g as Y,j as n,F as oe,a as e,n as le}from"./app-2fe6b77c.js";import{D as re}from"./DangerButton-9a99c80e.js";import{A as se}from"./App-d5d2db46.js";import{A as de}from"./AddModal-65c477ad.js";import{D as _}from"./DestroyModal-8230ab25.js";import{E as R}from"./EditModal-757dabcf.js";import ce from"./Edit-c3fa4dfc.js";import{T as g}from"./ThirdButton-4ecdd006.js";import pe from"./Create-6a42be75.js";import he from"./Edit-ffb9e4d0.js";import{T as o,B as me,P as ge}from"./Badge-e625a1c5.js";import{h as y}from"./moment-fbc5633a.js";import{S as F}from"./SecondaryButton-3b043a27.js";import"./ApplicationLogo-7c4e6aff.js";import"./transition-5b3e3f05.js";import"./render-5abf3d85.js";import"./index-74c86eb2.js";import"./use-tracked-pointer-4b635f7a.js";import"./keyboard-0d1edd6a.js";import"./use-outside-click-77d3e5d1.js";import"./use-tree-walker-525f14ed.js";import"./use-controllable-0e1719e7.js";import"./use-watch-1d31e25d.js";import"./dialog-19e4df28.js";import"./description-da7b4b94.js";import"./TextInput-ab47e367.js";import"./ComboboxMultiple-c6f7004e.js";import"./clsx-9e131b2a.js";import"./inheritsLoose-c4a937f7.js";import"./createClass-1dd8160f.js";import"./defineProperty-741a9c8e.js";/* empty css                         */import"./ComboboxMultipleWithOutSemuaUnit-4c33880a.js";import"./BPKP-525539d2.js";import"./InputLabel-9730e1e9.js";import"./PrimaryButton-055b76ad.js";import"./index-8e215918.js";import"./ComboboxMultiple copy-2d4eecae.js";import"./ComboboxPage-38b037ed.js";import"./LarsDHPKlinis-7bc3f0d7.js";import"./LarsDHPNonKlinis-4abd1a8e.js";import"./SedangTerjadi-7a2735ab.js";import"./IKPDataInsiden-ce1398e6.js";import"./IKPDataEvaluasi-4820f4bb.js";import"./Form-171dc553.js";import"./InputError-8b04bcb9.js";import"./TextAreaInput-8450abc1.js";import"./ComboboxPageReadonly-a89899d0.js";import"./Form-9d38e626.js";const c=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),p=()=>e("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function ue(r){const{data:m,meta:T,filtered:K,attributes:w}=r.IkpPasien;let f={IkpJenisInsiden:r.IkpJenisInsiden,IkpTipeInsiden:r.IkpTipeInsiden,IkpSpesialisasi:r.IkpSpesialisasi,IkpDampak:r.IkpDampak,IkpProbabilitas:r.IkpProbabilitas,IkpPelapor:r.IkpPelapor,IkpGrupLayanan:r.IkpGrupLayanan,IkpPenanggung:r.IkpPenanggung,IkpLokasi:r.IkpLokasi,IkpPenindak:r.IkpPenindak,pics:r.pics,IkpTerjadiTempatLain:[{id:0,name:"Tidak"},{id:1,name:"Ya"}],JenisKelamin:[{id:1,name:"Laki - Laki"},{id:2,name:"Perempuan"},{id:3,name:"-"}],IkpVerifikasi:[{id:0,name:"Tidak"},{id:1,name:"Ya"}],IkpInvestigasiLengkap:[{id:0,name:"Tidak"},{id:1,name:"Ya"}],IkpInvestigasiLanjut:[{id:0,name:"Tidak"},{id:1,name:"Ya"}]};const[A,W]=l.useState([]),[t,C]=l.useState(K),[$,G]=l.useState(!0),J=l.useCallback(H.debounce(i=>{Y.get(route(route().current()),{...H.pickBy(i),page:i.page},{preserveState:!0,preserveScroll:!0})},150),[]);l.useEffect(()=>{$?G(!1):J(t)},[t]),l.useEffect(()=>{let i=[];for(let s=w.per_page;s<w.total/w.per_page;s=s+w.per_page)i.push(s);W(i)},[]);const N=i=>{const s={...t,[i.target.name]:i.target.value,page:1};C(s)},d=i=>{C({...t,field:i,direction:t.direction=="asc"?"desc":"asc"})},[a,P]=l.useState(null),[ke,u]=l.useState(null),[L,v]=l.useState(!1),[S,I]=l.useState(!1),[E,b]=l.useState(!1),[q,x]=l.useState(!1),[U,M]=l.useState(!1),[V,D]=l.useState(!1),[k,h]=l.useState([]),Q=()=>{v(!0)},X=i=>{P(a===i?null:i)},Z=i=>{h(i),u(i),I(!0)},ee=i=>{h(i),u(i),x(!0)},ie=()=>{Y.delete(route("IkpPasien.destroy",k.id),{onSuccess:()=>x(!1)})},te=i=>{h(i),u(i),b(!0)},ne=i=>{h(i),u(i),M(!0)},ae=i=>{h(i),u(i),D(!0)};return n(oe,{children:[e(le,{title:"IKP Form"}),e(de,{isOpenAddDialog:L,setIsOpenAddDialog:v,size:"max-w-7xl",title:"Tambah IKP Form",children:e(pe,{ShouldMap:f,isOpenAddDialog:L,setIsOpenAddDialog:v})}),e(R,{isOpenEditDialog:S,setIsOpenEditDialog:I,size:"max-w-7xl",title:"Edit IKP Form",children:e(he,{model:k,ShouldMap:f,isOpenEditDialog:S,setIsOpenEditDialog:I})}),e(R,{isOpenEditDialog:E,setIsOpenEditDialog:b,size:"max-w-6xl",title:"Edit Hasil Investigasi",children:e(ce,{model:k,ShouldMap:f,isOpenEditDialog:E,setIsOpenEditDialog:b})}),e(_,{isOpenDestroyDialog:q,setIsOpenDestroyDialog:x,size:"max-w-4xl",title:"Delete IKP Form",warning:"Yakin hapus data ini ?",children:e(re,{className:"ml-2",onClick:ie,children:"Delete"})}),e(_,{isOpenDestroyDialog:U,setIsOpenDestroyDialog:M,size:"max-w-4xl",title:"Print IKP Form",warning:"Yakin print data ini ?",children:e(F,{className:"ml-2",onClick:i=>{h(i),window.open(route("export.printIkpForm",k.code)),M(!1)},children:"Print"})}),e(_,{isOpenDestroyDialog:V,setIsOpenDestroyDialog:D,size:"max-w-4xl",title:"Print Hasil Investigasi",warning:"Yakin print data ini ?",children:e(F,{className:"ml-2",onClick:i=>{h(i),window.open(route("export.printFormInvestigasiSederhana",k.code)),D(!1)},children:"Print"})}),e("div",{className:"px-2 py-12 bg-white border rounded-xl",children:n("div",{className:"mx-auto sm:px-6 lg:px-8",children:[n("div",{className:"flex items-center justify-between mb-2",children:[e("div",{className:"w-2/3",children:n("div",{className:"flex items-center justify-start mt-2 mb-0 mr-4 overflow-auto whitespace-nowrap gap-x-1",children:[n(g,{type:"button",color:"sky",onClick:Q,children:["Tambah IKP",n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2 icon icon-tabler icon-tabler-square-rounded-plus",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M9 12h6"}),e("path",{d:"M12 9v6"}),e("path",{d:"M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"})]})]}),n(g,{color:a===null?"gray":"blue",type:"button",className:`${a===null?"cursor-not-allowed":""}`,onClick:()=>{if(a!==null){const i=m[a];Z(i)}},disabled:a===null,children:["Edit",n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2 icon icon-tabler icon-tabler-edit",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),e("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),e("path",{d:"M16 5l3 3"})]})]}),n(g,{color:a===null?"gray":"red",type:"button",className:`${a===null?"cursor-not-allowed":""}`,onClick:()=>{if(a!==null){const i=m[a];ee(i)}},disabled:a===null,children:["Delete",n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2 icon icon-tabler icon-tabler-trash",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M4 7l16 0"}),e("path",{d:"M10 11l0 6"}),e("path",{d:"M14 11l0 6"}),e("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),e("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})]}),n(g,{color:a===null?"gray":"yellow",type:"button",className:`${a===null?"cursor-not-allowed":""}`,onClick:()=>{if(a!==null){const i=m[a];te(i)}},disabled:a===null,children:["Hasil Investigasi",n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2 icon icon-tabler icon-tabler-report-search",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697"}),e("path",{d:"M18 12v-5a2 2 0 0 0 -2 -2h-2"}),e("path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),e("path",{d:"M8 11h4"}),e("path",{d:"M8 15h3"}),e("path",{d:"M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0"}),e("path",{d:"M18.5 19.5l2.5 2.5"})]})]}),n(g,{color:a===null?"gray":"teal",type:"button",className:`${a===null?"cursor-not-allowed":""}`,onClick:()=>{if(a!==null){const i=m[a];ne(i)}},disabled:a===null,children:["Print Laporan_IKP",n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2 icon icon-tabler icon-tabler-report-search",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697"}),e("path",{d:"M18 12v-5a2 2 0 0 0 -2 -2h-2"}),e("path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),e("path",{d:"M8 11h4"}),e("path",{d:"M8 15h3"}),e("path",{d:"M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0"}),e("path",{d:"M18.5 19.5l2.5 2.5"})]})]}),n(g,{color:a===null?"gray":"sky",type:"button",className:`${a===null?"cursor-not-allowed":""}`,onClick:()=>{if(a!==null){const i=m[a];ae(i)}},disabled:a===null,children:["Print Hasil Investigasi",n("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 ml-2 icon icon-tabler icon-tabler-report-search",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697"}),e("path",{d:"M18 12v-5a2 2 0 0 0 -2 -2h-2"}),e("path",{d:"M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),e("path",{d:"M8 11h4"}),e("path",{d:"M8 15h3"}),e("path",{d:"M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0"}),e("path",{d:"M18.5 19.5l2.5 2.5"})]})]})]})}),e("div",{className:"w-1/3",children:n("div",{className:"flex items-center justify-end mt-2 mb-0 gap-x-1",children:[e("select",{name:"load",id:"load",onChange:N,value:t.load,className:"transition duration-150 ease-in-out border-gray-300 rounded-lg focus:ring-blue-200 focus:ring form-select",children:A.map((i,s)=>e("option",{children:i},s))}),n("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded-lg gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",autoComplete:"off",name:"q",id:"q",onChange:N,value:t.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),n(o,{children:[e(o.Thead,{children:n(o.Tr,{children:[e(o.Th,{children:"#"}),n(o.Th,{onClick:()=>d("tanggal_insiden"),children:["Tanggal_Kejadian",t.field=="tanggal_insiden"&&t.direction=="asc"&&e(c,{}),t.field=="tanggal_insiden"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("created_at"),children:["Tanggal Melapor",t.field=="created_at"&&t.direction=="asc"&&e(c,{}),t.field=="created_at"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("lokasi_name"),children:["Unit",t.field=="lokasi_name"&&t.direction=="asc"&&e(c,{}),t.field=="lokasi_name"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("ikp_jenis_insiden_id"),children:["Jenis Insiden",t.field=="ikp_jenis_insiden_id"&&t.direction=="asc"&&e(c,{}),t.field=="ikp_jenis_insiden_id"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("insiden"),children:["Insiden",t.field=="insiden"&&t.direction=="asc"&&e(c,{}),t.field=="insiden"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("ikp_penanggung_id"),children:["Penannggung Jawab Biaya",t.field=="ikp_penanggung_id"&&t.direction=="asc"&&e(c,{}),t.field=="ikp_penanggung_id"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("concatdp"),children:["Grading",t.field=="concatdp"&&t.direction=="asc"&&e(c,{}),t.field=="concatdp"&&t.direction=="desc"&&e(p,{})]}),n(o.Th,{onClick:()=>d("concatdp2"),children:["Grading Setelah Investigasi",t.field=="concatdp2"&&t.direction=="asc"&&e(c,{}),t.field=="concatdp2"&&t.direction=="desc"&&e(p,{})]})]})}),e(o.Tbody,{children:m.map((i,s)=>{var j,z,O,B;return n("tr",{className:a===s?"bg-sky-100  cursor-pointer":i.riskgrading.name_ikp=="Ekstrim"?"cursor-pointer text-white bg-red-500":i.riskgrading.name_ikp=="Tinggi"?"cursor-pointer text-white bg-amber-500":i.riskgrading.name_ikp=="Moderat"?"cursor-pointer text-white bg-green-500":"cursor-pointer text-white bg-sky-500",onClick:()=>X(s),children:[e(o.Td,{children:e(me,{children:T.from+s})}),n(o.Td,{children:[y(i.tanggal_insiden).format("DD-MM-YYYY")," ","(",y(i.tanggal_insiden).format("hh:mm"),")"]}),e(o.Td,{className:"whitespace-nowrap",children:y(i.created_at).format("DD-MM-YYYY")}),e(o.Td,{children:i.lokasi_name}),e(o.Td,{children:(j=i.jenis_insiden)==null?void 0:j.name}),e(o.Td,{children:i.insiden}),e(o.Td,{children:(z=i.penanggung)==null?void 0:z.name}),e(o.Td,{children:(O=i.riskgrading)==null?void 0:O.name_ikp}),e(o.Td,{children:i.hasil_grading?i.ikp_hasil?(B=i.hasil_grading)==null?void 0:B.name_ikp:"Belum Investigasi":i.ikp_hasil?"Sudah Investigasi Belum Grading":"Belum Investigasi"})]},s)})})]}),e(ge,{meta:T})]})})]})}ue.layout=r=>e(se,{children:r});export{ue as default};
