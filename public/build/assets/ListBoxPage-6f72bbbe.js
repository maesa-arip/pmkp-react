import{r as p,e as B,j as z,a as w,F as ve}from"./app-deaba12f.js";import{V as E,j as _,y as $,o as f,u as D,a as K,p as V,C as be,d as X,P as xe,X as F,c as ge,s as me,m as q,K as he}from"./transition-78ca94c2.js";import{b as Oe,c as ye,F as Re,h as Le,s as Se,a as G,e as we,o as m,r as Ie,A as Te}from"./keyboard-356e2d1a.js";import{T as ke,e as Pe,i as ee,s as Ce,u as De,a as L,x as Me}from"./use-tracked-pointer-1b3f2028.js";var Ee=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ee||{}),$e=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))($e||{}),Fe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Fe||{}),Ne=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(Ne||{});function W(e,r=a=>a){let a=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=Te(r(e.options.slice()),s=>s.dataRef.current.domRef.current),n=a?o.indexOf(a):null;return n===-1&&(n=null),{options:o,activeOptionIndex:n}}let Ae={[1](e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},[0](e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let r=e.activeOptionIndex,{isSelected:a}=e.dataRef.current,o=e.options.findIndex(n=>a(n.dataRef.current.value));return o!==-1&&(r=o),{...e,listboxState:0,activeOptionIndex:r}},[2](e,r){var a;if(e.dataRef.current.disabled||e.listboxState===1)return e;let o=W(e),n=Me(r,{resolveItems:()=>o.options,resolveActiveIndex:()=>o.activeOptionIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...o,searchQuery:"",activeOptionIndex:n,activationTrigger:(a=r.trigger)!=null?a:1}},[3]:(e,r)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let a=e.searchQuery!==""?0:1,o=e.searchQuery+r.value.toLowerCase(),n=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+a).concat(e.options.slice(0,e.activeOptionIndex+a)):e.options).find(t=>{var i;return!t.dataRef.current.disabled&&((i=t.dataRef.current.textValue)==null?void 0:i.startsWith(o))}),s=n?e.options.indexOf(n):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeOptionIndex:s,activationTrigger:1}},[4](e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},[5]:(e,r)=>{let a={id:r.id,dataRef:r.dataRef},o=W(e,n=>[...n,a]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(r.dataRef.current.value)&&(o.activeOptionIndex=o.options.indexOf(a)),{...e,...o}},[6]:(e,r)=>{let a=W(e,o=>{let n=o.findIndex(s=>s.id===r.id);return n!==-1&&o.splice(n,1),o});return{...e,...a,activationTrigger:1}},[7]:(e,r)=>({...e,labelId:r.id})},J=p.createContext(null);J.displayName="ListboxActionsContext";function N(e){let r=p.useContext(J);if(r===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,N),a}return r}let Y=p.createContext(null);Y.displayName="ListboxDataContext";function A(e){let r=p.useContext(Y);if(r===null){let a=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,A),a}return r}function je(e,r){return D(r.type,Ae,e,r)}let Qe=p.Fragment,Be=E(function(e,r){let{value:a,defaultValue:o,name:n,onChange:s,by:t=(u,c)=>u===c,disabled:i=!1,horizontal:h=!1,multiple:x=!1,...R}=e;const S=h?"horizontal":"vertical";let P=$(r),[O=x?[]:void 0,T]=ke(a,s,o),[k,d]=p.useReducer(je,{dataRef:p.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),l=p.useRef({static:!1,hold:!1}),v=p.useRef(null),C=p.useRef(null),H=p.useRef(null),g=f(typeof t=="string"?(u,c)=>{let y=t;return(u==null?void 0:u[y])===(c==null?void 0:c[y])}:t),I=p.useCallback(u=>D(b.mode,{[1]:()=>O.some(c=>g(c,u)),[0]:()=>g(O,u)}),[O]),b=p.useMemo(()=>({...k,value:O,disabled:i,mode:x?1:0,orientation:S,compare:g,isSelected:I,optionsPropsRef:l,labelRef:v,buttonRef:C,optionsRef:H}),[O,i,x,k]);K(()=>{k.dataRef.current=b},[b]),Oe([b.buttonRef,b.optionsRef],(u,c)=>{var y;d({type:1}),ye(c,Re.Loose)||(u.preventDefault(),(y=b.buttonRef.current)==null||y.focus())},b.listboxState===0);let te=p.useMemo(()=>({open:b.listboxState===0,disabled:i,value:O}),[b,i,O]),oe=f(u=>{let c=b.options.find(y=>y.id===u);!c||M(c.dataRef.current.value)}),ne=f(()=>{if(b.activeOptionIndex!==null){let{dataRef:u,id:c}=b.options[b.activeOptionIndex];M(u.current.value),d({type:2,focus:L.Specific,id:c})}}),re=f(()=>d({type:0})),ie=f(()=>d({type:1})),ae=f((u,c,y)=>u===L.Specific?d({type:2,focus:L.Specific,id:c,trigger:y}):d({type:2,focus:u,trigger:y})),le=f((u,c)=>(d({type:5,id:u,dataRef:c}),()=>d({type:6,id:u}))),se=f(u=>(d({type:7,id:u}),()=>d({type:7,id:null}))),M=f(u=>D(b.mode,{[0](){return T==null?void 0:T(u)},[1](){let c=b.value.slice(),y=c.findIndex(Q=>g(Q,u));return y===-1?c.push(u):c.splice(y,1),T==null?void 0:T(c)}})),ue=f(u=>d({type:3,value:u})),de=f(()=>d({type:4})),ce=p.useMemo(()=>({onChange:M,registerOption:le,registerLabel:se,goToOption:ae,closeListbox:ie,openListbox:re,selectActiveOption:ne,selectOption:oe,search:ue,clearSearch:de}),[]),pe={ref:P},j=p.useRef(null),fe=V();return p.useEffect(()=>{!j.current||o!==void 0&&fe.addEventListener(j.current,"reset",()=>{M(o)})},[j,M]),B.createElement(J.Provider,{value:ce},B.createElement(Y.Provider,{value:b},B.createElement(be,{value:D(b.listboxState,{[0]:X.Open,[1]:X.Closed})},n!=null&&O!=null&&Pe({[n]:O}).map(([u,c],y)=>B.createElement(Le,{features:Se.Hidden,ref:y===0?Q=>{var Z;j.current=(Z=Q==null?void 0:Q.closest("form"))!=null?Z:null}:void 0,...xe({key:u,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:u,value:c})})),F({ourProps:pe,theirProps:R,slot:te,defaultTag:Qe,name:"Listbox"}))))}),ze="button",Ue=E(function(e,r){var a;let o=G(),{id:n=`headlessui-listbox-button-${o}`,...s}=e,t=A("Listbox.Button"),i=N("Listbox.Button"),h=$(t.buttonRef,r),x=V(),R=f(d=>{switch(d.key){case m.Space:case m.Enter:case m.ArrowDown:d.preventDefault(),i.openListbox(),x.nextFrame(()=>{t.value||i.goToOption(L.First)});break;case m.ArrowUp:d.preventDefault(),i.openListbox(),x.nextFrame(()=>{t.value||i.goToOption(L.Last)});break}}),S=f(d=>{switch(d.key){case m.Space:d.preventDefault();break}}),P=f(d=>{if(Ie(d.currentTarget))return d.preventDefault();t.listboxState===0?(i.closeListbox(),x.nextFrame(()=>{var l;return(l=t.buttonRef.current)==null?void 0:l.focus({preventScroll:!0})})):(d.preventDefault(),i.openListbox())}),O=ee(()=>{if(t.labelId)return[t.labelId,n].join(" ")},[t.labelId,n]),T=p.useMemo(()=>({open:t.listboxState===0,disabled:t.disabled,value:t.value}),[t]),k={ref:h,id:n,type:Ce(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":(a=t.optionsRef.current)==null?void 0:a.id,"aria-expanded":t.disabled?void 0:t.listboxState===0,"aria-labelledby":O,disabled:t.disabled,onKeyDown:R,onKeyUp:S,onClick:P};return F({ourProps:k,theirProps:s,slot:T,defaultTag:ze,name:"Listbox.Button"})}),Ke="label",Ve=E(function(e,r){let a=G(),{id:o=`headlessui-listbox-label-${a}`,...n}=e,s=A("Listbox.Label"),t=N("Listbox.Label"),i=$(s.labelRef,r);K(()=>t.registerLabel(o),[o]);let h=f(()=>{var R;return(R=s.buttonRef.current)==null?void 0:R.focus({preventScroll:!0})}),x=p.useMemo(()=>({open:s.listboxState===0,disabled:s.disabled}),[s]);return F({ourProps:{ref:i,id:o,onClick:h},theirProps:n,slot:x,defaultTag:Ke,name:"Listbox.Label"})}),Ge="ul",He=_.RenderStrategy|_.Static,We=E(function(e,r){var a;let o=G(),{id:n=`headlessui-listbox-options-${o}`,...s}=e,t=A("Listbox.Options"),i=N("Listbox.Options"),h=$(t.optionsRef,r),x=V(),R=V(),S=ge(),P=(()=>S!==null?S===X.Open:t.listboxState===0)();p.useEffect(()=>{var l;let v=t.optionsRef.current;!v||t.listboxState===0&&v!==((l=we(v))==null?void 0:l.activeElement)&&v.focus({preventScroll:!0})},[t.listboxState,t.optionsRef]);let O=f(l=>{switch(R.dispose(),l.key){case m.Space:if(t.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),i.search(l.key);case m.Enter:if(l.preventDefault(),l.stopPropagation(),t.activeOptionIndex!==null){let{dataRef:v}=t.options[t.activeOptionIndex];i.onChange(v.current.value)}t.mode===0&&(i.closeListbox(),q().nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})}));break;case D(t.orientation,{vertical:m.ArrowDown,horizontal:m.ArrowRight}):return l.preventDefault(),l.stopPropagation(),i.goToOption(L.Next);case D(t.orientation,{vertical:m.ArrowUp,horizontal:m.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),i.goToOption(L.Previous);case m.Home:case m.PageUp:return l.preventDefault(),l.stopPropagation(),i.goToOption(L.First);case m.End:case m.PageDown:return l.preventDefault(),l.stopPropagation(),i.goToOption(L.Last);case m.Escape:return l.preventDefault(),l.stopPropagation(),i.closeListbox(),x.nextFrame(()=>{var v;return(v=t.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});case m.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(i.search(l.key),R.setTimeout(()=>i.clearSearch(),350));break}}),T=ee(()=>{var l,v,C;return(C=(l=t.labelRef.current)==null?void 0:l.id)!=null?C:(v=t.buttonRef.current)==null?void 0:v.id},[t.labelRef.current,t.buttonRef.current]),k=p.useMemo(()=>({open:t.listboxState===0}),[t]),d={"aria-activedescendant":t.activeOptionIndex===null||(a=t.options[t.activeOptionIndex])==null?void 0:a.id,"aria-multiselectable":t.mode===1?!0:void 0,"aria-labelledby":T,"aria-orientation":t.orientation,id:n,onKeyDown:O,role:"listbox",tabIndex:0,ref:h};return F({ourProps:d,theirProps:s,slot:k,defaultTag:Ge,features:He,visible:P,name:"Listbox.Options"})}),Xe="li",qe=E(function(e,r){let a=G(),{id:o=`headlessui-listbox-option-${a}`,disabled:n=!1,value:s,...t}=e,i=A("Listbox.Option"),h=N("Listbox.Option"),x=i.activeOptionIndex!==null?i.options[i.activeOptionIndex].id===o:!1,R=i.isSelected(s),S=p.useRef(null),P=me({disabled:n,value:s,domRef:S,get textValue(){var g,I;return(I=(g=S.current)==null?void 0:g.textContent)==null?void 0:I.toLowerCase()}}),O=$(r,S);K(()=>{if(i.listboxState!==0||!x||i.activationTrigger===0)return;let g=q();return g.requestAnimationFrame(()=>{var I,b;(b=(I=S.current)==null?void 0:I.scrollIntoView)==null||b.call(I,{block:"nearest"})}),g.dispose},[S,x,i.listboxState,i.activationTrigger,i.activeOptionIndex]),K(()=>h.registerOption(o,P),[P,o]);let T=f(g=>{if(n)return g.preventDefault();h.onChange(s),i.mode===0&&(h.closeListbox(),q().nextFrame(()=>{var I;return(I=i.buttonRef.current)==null?void 0:I.focus({preventScroll:!0})}))}),k=f(()=>{if(n)return h.goToOption(L.Nothing);h.goToOption(L.Specific,o)}),d=De(),l=f(g=>d.update(g)),v=f(g=>{!d.wasMoved(g)||n||x||h.goToOption(L.Specific,o,0)}),C=f(g=>{!d.wasMoved(g)||n||!x||h.goToOption(L.Nothing)}),H=p.useMemo(()=>({active:x,selected:R,disabled:n}),[x,R,n]);return F({ourProps:{id:o,ref:O,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":R,disabled:void 0,onClick:T,onFocus:k,onPointerEnter:l,onMouseEnter:l,onPointerMove:v,onMouseMove:v,onPointerLeave:C,onMouseLeave:C},theirProps:t,slot:H,defaultTag:Xe,name:"Listbox.Option"})}),U=Object.assign(Be,{Button:Ue,Label:Ve,Options:We,Option:qe});function et({ShouldMap:e,selected:r,onChange:a,name:o}){return z(U,{as:"div",className:"relative w-full",value:r,onChange:a,name:o,children:[z(U.Button,{className:"flex justify-between w-full px-3 py-2 mt-1 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[w("span",{className:"block truncate",children:r.name}),w("span",{className:"inset-y-0 right-0 flex items-center justify-between pointer-events-none",children:z("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-gray-400 icon icon-tabler icon-tabler-selector","aria-hidden":"true",width:24,height:24,viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[w("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),w("path",{d:"M8 9l4 -4l4 4"}),w("path",{d:"M16 15l-4 4l-4 -4"})]})})]}),w(he,{as:p.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:w(U.Options,{className:"absolute z-10 w-full h-auto py-1 mt-1 overflow-hidden overflow-y-auto text-base bg-white rounded-md shadow-lg max-h-64 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:e.map(n=>w(U.Option,{className:({active:s})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${s?"bg-amber-100 text-amber-900":"text-gray-900"}`,value:n,children:({selected:s})=>z(ve,{children:[w("span",{className:`block truncate ${s?"font-semibold":"font-normal"}`,children:n.name}),s?w("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600",children:w("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:w("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})}):null]})},n.id))})})]})}export{et as L};
