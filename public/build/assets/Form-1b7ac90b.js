import{r as m,a as e,j as n,F as _}from"./app-e63dc518.js";import{k as h,b as H,a as Q,C as u}from"./ComboboxPage-b6ce5bc8.js";import{I as r}from"./InputError-47496446.js";import{I as c}from"./InputLabel-85eaffe7.js";import{P as Y}from"./PrimaryButton-0019f275.js";import{S as X}from"./SecondaryButton-eba774a1.js";import{T as N}from"./TextAreaInput-67513412.js";import{T as g}from"./TextInput-6ffa0885.js";import{C as Z}from"./ComboboxMultiple-660ff063.js";import{K as M}from"./transition-f8d58bb7.js";import"./use-tracked-pointer-b056eebf.js";import"./render-d70bc49e.js";import"./keyboard-447131b1.js";import"./use-outside-click-bb6a6fc0.js";import"./use-tree-walker-217dc56f.js";import"./use-controllable-a3dfb2af.js";import"./use-watch-8712103b.js";import"./clsx-bc91b332.js";import"./defineProperty-8250cd14.js";function D({ShouldMap:l,selected:f,tampilkanvalue:i="false",onChange:d,name:v}){const[s,t]=m.useState(""),p=s===""?l:l.filter(o=>o.description.toLowerCase().replace(/\s+/g,"").includes(s.toLowerCase().replace(/\s+/g,"")));return e("div",{className:"",children:e(h,{value:f,onChange:d,name:v,children:n("div",{className:"relative mt-1",children:[n("div",{className:"relative w-full overflow-hidden text-left bg-white border border-gray-300 rounded-md shadow-sm cursor-default focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300",children:[e(h.Input,{className:"w-full py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 break-words border-none focus:ring-0",autoComplete:"off",displayValue:o=>o.value?"("+o.value+") "+o.description:o.description,onChange:o=>t(o.target.value)}),e(h.Button,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:e(H,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})})]}),e(M,{as:m.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>t(""),children:e(h.Options,{className:"absolute z-10 w-full py-1 mt-1 overflow-auto text-base break-words bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:p.length===0&&s!==""?e("div",{className:"relative px-4 py-2 text-gray-700 cursor-default select-none",children:"Nothing found."}):p.map(o=>e(h.Option,{className:({active:k})=>`relative cursor-default select-none py-2 pl-10 pr-4 ${k?"bg-teal-600 text-white":"text-gray-900"}`,value:o,children:({selected:k,active:b})=>n(_,{children:[n("span",{className:`block truncate ${k?"font-medium":"font-normal"}`,children:[o.value," ",o.description]}),k?e("span",{className:`absolute inset-y-0 left-0 flex items-center pl-3 ${b?"text-white":"text-teal-600"}`,children:e(Q,{className:"w-5 h-5","aria-hidden":"true"})}):null]})},o.id))})})]})})})}function ve({errors:l,submit:f,data:i,setData:d,closeButton:v,ShouldMap:s,model:t}){console.log(t),m.useState(null);const p=[{name:""}],I=(i.pic_id?i.pic_id:",").replace(/['"]+/g,"").split(",").map(a=>a.toString()),[y,x]=m.useState(()=>t?s.IkpPenanggung.find(a=>a.id===t.ikp_penanggung_id):p[0]),[P,C]=m.useState(()=>t?s.JenisKelamin.find(a=>a.id===t.jeniskelamin):p[0]),[w,j]=m.useState(()=>t?s.IkpPelapor.find(a=>a.id===t.ikp_pelapor_id):p[0]),[T,S]=m.useState(()=>t?s.IkpGrupLayanan.find(a=>a.id===t.ikp_gruplayanan_id):p[0]),[L,K]=m.useState(()=>t?s.IkpJenisInsiden.find(a=>a.id===t.ikp_jenis_insiden_id):p[0]),[J,F]=m.useState(()=>t?s.IkpTipeInsiden.find(a=>a.id===t.ikp_tipe_insiden_id):p[0]),[B,G]=m.useState(()=>t?s.IkpLokasi.find(a=>a.id===t.ikp_lokasi_id):p[0]),[O,R]=m.useState(()=>t?s.IkpSpesialisasi.find(a=>a.id===t.ikp_spesialisasi_id):p[0]),[U,V]=m.useState(()=>t?s.IkpDampak.find(a=>a.id===t.ikp_dampak_id):p[0]),[W,$]=m.useState(()=>t?s.IkpProbabilitas.find(a=>a.id===t.ikp_probabilitas_id):p[0]),[A,E]=m.useState(()=>t?s.IkpPenindak.find(a=>a.id===t.ikp_penindak_id):p[0]),[q,z]=m.useState(()=>t?s.IkpTerjadiTempatLain.find(a=>a.id===t.terjadi_tempatlain):p[0]);return n(_,{children:[n("div",{className:"px-4 py-5 bg-white sm:p-6",children:[e("div",{className:"grid grid-cols-12 gap-6",children:n("div",{className:"col-span-12 p-6 my-6 border-4 rounded-lg border-cyan-200 ",children:[e("label",{htmlFor:"",className:"block mb-4 text-lg font-bold text-gray-700 ",children:"Data Pasien (Wajib di Input)"}),n("div",{className:"grid grid-cols-12 gap-6",children:[n("div",{className:"col-span-6",children:[e(c,{for:"namapasien",value:"Nama Pasien"}),e(g,{id:"namapasien",value:i.namapasien,handleChange:a=>d("namapasien",a.target.value),type:"text",className:"block w-full mt-1"}),e(r,{message:l.namapasien,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"nrm",value:"NRM"}),e(g,{id:"nrm",value:i.nrm,handleChange:a=>d("nrm",a.target.value),type:"text",className:"block w-full mt-1"}),e(r,{message:l.nrm,className:"mt-2"})]}),n("div",{className:"col-span-2",children:[e(c,{for:"umur_tahun",value:"Umur"}),e(g,{id:"umur_tahun",value:i.umur_tahun,placeholder:"Tahun",handleChange:a=>d("umur_tahun",a.target.value),type:"number",className:"block w-full mt-1"}),e(r,{message:l.umur_tahun,className:"mt-2"})]}),n("div",{className:"col-span-2",children:[e(c,{for:"umur_bulan",value:"-"}),e(g,{id:"umur_bulan",value:i.umur_bulan,placeholder:"Bulan",handleChange:a=>d("umur_bulan",a.target.value),type:"number",className:"block w-full mt-1"}),e(r,{message:l.umur_bulan,className:"mt-2"})]}),n("div",{className:"col-span-2",children:[e(c,{for:"umur_hari",value:"-"}),e(g,{id:"umur_hari",value:i.umur_hari,placeholder:"Hari",handleChange:a=>d("umur_hari",a.target.value),type:"number",className:"block w-full mt-1"}),e(r,{message:l.umur_hari,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpPenanggung",value:"Penanggung Biaya Pasien"}),e(u,{ShouldMap:s.IkpPenanggung,selected:y,onChange:a=>{d({...i,ikp_penanggung_id:a.id}),x(a)}}),e(r,{message:l.ikp_penanggung_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"JenisKelamin",value:"Jenis Kelamin"}),e(u,{ShouldMap:s.JenisKelamin,selected:P,onChange:a=>{d({...i,jeniskelamin:a.id}),C(a)}}),e(r,{message:l.jeniskelamin,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"TanggalPelayanan",value:"Tanggal Masuk RS"}),e(g,{id:"tanggal_pelayanan",value:i.tanggal_pelayanan,handleChange:a=>d("tanggal_pelayanan",a.target.value),type:"datetime-local",className:"block w-full mt-1"}),e(r,{message:l.tanggal_pelayanan,className:"mt-2"})]})]})]})}),e("div",{className:"grid grid-cols-12 gap-6",children:n("div",{className:"col-span-12 p-6 my-6 border-4 rounded-lg border-cyan-200 ",children:[e("label",{htmlFor:"",className:"block mb-4 text-lg font-bold text-gray-700 ",children:"Rincian Kejadian (Wajib di Input)"}),n("div",{className:"grid grid-cols-12 gap-6",children:[n("div",{className:"col-span-6",children:[e(c,{for:"tanggal_insiden",value:"Tanggal dan Waktu Insiden"}),e(g,{id:"tanggal_insiden",value:i.tanggal_insiden,handleChange:a=>d("tanggal_insiden",a.target.value),type:"datetime-local",className:"block w-full mt-1"}),e(r,{message:l.tanggal_insiden,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpPelapor",value:"Orang Pertama Yang Melaporkan Insiden"}),e(u,{ShouldMap:s.IkpPelapor,selected:w,onChange:a=>{d({...i,ikp_pelapor_id:a.id}),j(a)}}),e(r,{message:l.ikp_pelapor_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"insiden",value:"Insiden"}),e(g,{id:"insiden",value:i.insiden,handleChange:a=>d("insiden",a.target.value),type:"text",className:"block w-full mt-1"}),e(r,{message:l.insiden,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpGrupLayanan",value:"Insiden menyangkut pasien"}),e(u,{ShouldMap:s.IkpGrupLayanan,selected:T,onChange:a=>{d({...i,ikp_gruplayanan_id:a.id}),S(a)}}),e(r,{message:l.ikp_gruplayanan_id,className:"mt-2"})]}),n("div",{className:"col-span-12",children:[e(c,{for:"kronologi",value:"Kronologis Insiden"}),e(N,{id:"kronologi",value:i.kronologi,handleChange:a=>d("kronologi",a.target.value),rows:5,type:"text",className:"block w-full mt-1"}),e(r,{message:l.kronologi,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpJenisInsiden",value:"Jenis Insiden"}),e(u,{ShouldMap:s.IkpJenisInsiden,selected:L,onChange:a=>{d({...i,ikp_jenis_insiden_id:a.id}),K(a)}}),e(r,{message:l.ikp_jenis_insiden_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpTipeInsiden",value:"Tipe Insiden"}),e(u,{ShouldMap:s.IkpTipeInsiden,selected:J,onChange:a=>{d({...i,ikp_tipe_insiden_id:a.id}),F(a)}}),e(r,{message:l.ikp_tipe_insiden_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpSpesialisasi",value:"Insiden Terjadi Pada Pasien"}),e(u,{ShouldMap:s.IkpSpesialisasi,selected:O,onChange:a=>{d({...i,ikp_spesialisasi_id:a.id}),R(a)}}),e(r,{message:l.ikp_spesialisasi_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"IkpLokasi",value:"Tempat Insiden"}),e(u,{ShouldMap:s.IkpLokasi,selected:B,onChange:a=>{d({...i,ikp_lokasi_id:a.id}),G(a)}}),e(r,{message:l.ikp_lokasi_id,className:"mt-2"})]}),i.ikp_lokasi_id?n(_,{children:[e("div",{className:"col-span-6"}),n("div",{className:"col-span-6",children:[e(c,{for:"lokasi_name",value:"Lokasi Detail Kejadian IKP"}),e(g,{id:"lokasi_name",value:i.lokasi_name,handleChange:a=>d("lokasi_name",a.target.value),type:"text",className:"block w-full mt-1"}),e(r,{message:l.lokasi_name,className:"mt-2"})]})]}):e(_,{}),n("div",{className:"col-span-12",children:[e(c,{for:"Kategori Risiko",value:"Unit Kerja Penyebab Insiden"}),e(Z,{ShouldMap:s.pics,name:"pic_id",onChange:a=>{d({...i,pic_id:a})},defaultValues:I}),e(r,{message:l.pic_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"Dampak",value:"Dampak Insiden Terhadap Pasien"}),e(D,{ShouldMap:s.IkpDampak,selected:U,onChange:a=>{d({...i,ikp_dampak_id:a.id}),V(a)}}),e(r,{message:l.ikp_dampak_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"Probabilitas",value:"Probabilitas"}),e(u,{ShouldMap:s.IkpProbabilitas,selected:W,onChange:a=>{d({...i,ikp_probabilitas_id:a.id}),$(a)}}),e(r,{message:l.ikp_probabilitas_id,className:"mt-2"})]}),n("div",{className:"col-span-12",children:[e(c,{for:"tindak_lanjut_hasil",value:"Tindak lanjut yang dilakukan segera setelah kejadian, dan hasilnya"}),e(N,{id:"tindak_lanjut_hasil",value:i.tindak_lanjut_hasil,handleChange:a=>d("tindak_lanjut_hasil",a.target.value),rows:5,type:"text",className:"block w-full mt-1"}),e(r,{message:l.tindak_lanjut_hasil,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"Penindak",value:"Tindak Lanjut Dilakukan Oleh"}),e(u,{ShouldMap:s.IkpPenindak,selected:A,onChange:a=>{d({...i,ikp_penindak_id:a.id}),E(a)}}),e(r,{message:l.ikp_penindak_id,className:"mt-2"})]}),n("div",{className:"col-span-6",children:[e(c,{for:"TerjadiTempatlain",value:"Apakah kejadian insiden yang sama pernah terjadi pada Pelayanan lain ?"}),e(u,{ShouldMap:s.IkpTerjadiTempatLain,selected:q,onChange:a=>{d({...i,terjadi_tempatlain:a.id}),z(a)}}),e(r,{message:l.terjadi_tempatlain,className:"mt-2"})]}),i.terjadi_tempatlain==1?n("div",{className:"col-span-12",children:[e(c,{for:"langkah_tempatlain",value:"Langkah/tindakan apa yang telah diambil pada pelayanan tersebut untuk mencegah terulangnya kejadian yang sama?"}),e(N,{id:"langkah_tempatlain",value:i.langkah_tempatlain,handleChange:a=>d("langkah_tempatlain",a.target.value),rows:5,type:"text",className:"block w-full mt-1"}),e(r,{message:l.langkah_tempatlain,className:"mt-2"})]}):e(_,{})]})]})})]}),n("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e(Y,{children:f}),e(X,{className:"mx-2",onClick:v,children:"Batal"})]})]})}export{ve as default};
