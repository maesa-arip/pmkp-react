import{r as s}from"./app-e63dc518.js";import{b as p,F as v}from"./keyboard-447131b1.js";import{s as E}from"./render-d70bc49e.js";function d(c,m,r){let l=E(m);s.useEffect(()=>{function i(o){l.current(o)}return document.addEventListener(c,i,r),()=>document.removeEventListener(c,i,r)},[c,r])}function h(c,m,r=!0){let l=s.useRef(!1);s.useEffect(()=>{requestAnimationFrame(()=>{l.current=r})},[r]);function i(e,f){if(!l.current||e.defaultPrevented)return;let a=function u(n){return typeof n=="function"?u(n()):Array.isArray(n)||n instanceof Set?n:[n]}(c),t=f(e);if(t!==null&&t.getRootNode().contains(t)){for(let u of a){if(u===null)continue;let n=u instanceof HTMLElement?u:u.current;if(n!=null&&n.contains(t)||e.composed&&e.composedPath().includes(n))return}return!p(t,v.Loose)&&t.tabIndex!==-1&&e.preventDefault(),m(e,t)}}let o=s.useRef(null);d("mousedown",e=>{var f,a;l.current&&(o.current=((a=(f=e.composedPath)==null?void 0:f.call(e))==null?void 0:a[0])||e.target)},!0),d("click",e=>{!o.current||(i(e,()=>o.current),o.current=null)},!0),d("blur",e=>i(e,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}export{h as L};
